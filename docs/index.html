<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documentation | ascii.js</title>
  </head>
  <body>
    <canvas id="canvas"></canvas>

    <script type="module">
      import Runtime, {
        Scene,
        Menu,
      } from "https://cdn.jsdelivr.net/gh/nottimtam/ascii.js/dist/build.js";

      const tree = [
        { path: "/examples", label: "examples", type: "dir" },
        { path: "/getting-started", label: "getting-started", type: "dir" },
        { path: "/learn", label: "learn", type: "dir" },
        { path: "/INDEX.md", label: "INDEX", type: "file" },
      ];

      const runtime = new Runtime({
        renderer: {
          resolution: [64, 32],
          canvas: "canvas#canvas",
          fontSize: "32px",
          forceParentStyles: true,
          scaling: "letterbox",
          useWebWorkers: true,
          renderMode: "merged",
        },
      });
      self.runtime = runtime;

      const scene = new Scene(runtime, {
        label: "Documentation",
      });

      const menu = new Menu(scene, {
        x: 0,
        y: 0,
        maintainFocus: true,
        deleteOnBlur: false,
        alignCenter: false,
        gamepad: -1,
        border: false,
        layer: "system",
      });

      const updateMenuItems = (items) => {
        menu.items = items.map(
          ({ path, label, type }) =>
            new Menu.Button({
              label: label,
              callback: () => {
                console.log(`${label} clicked.`);
              },
            })
        );

        console.log(menu.items);
      };

      updateMenuItems([...tree]);

      runtime.start();

      runtime.loadScene(scene);
    </script>
  </body>
</html>
